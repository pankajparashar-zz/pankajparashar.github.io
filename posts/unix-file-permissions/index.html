<!DOCTYPE html><html dir=ltr lang=en-US class=no-js><head><!-- | Character Encoding |
        ===========================
        1. Authors are encouraged to use UTF-8, as its the most friendly for internationalization.
        2. This <meta> element must be inside the <head> element within the first-512 bytes of the page. --><meta charset=utf-8><!-- | HTML5 Link Prefetch |
        ============================
        Link prefetching is a browser mechanism, which utilizes browser idle time to download or prefetch
        documents that the user might visit in the near future.
        Prerender : Identifies a webpage to load in the background, in case the user wants to navigate to it next
        Prefetch : Identifies a resource file, such as an image or a CSS stylesheet, to be downloaded into the cache
        DNS-Prefetch : Identifies a DNS query to resolve the background, so that requests can occur more quickly --><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//res.cloudinary.com><link rel=prerender href=//pankajparashar.com/projects><!-- | Flip ahead browsing |
        ============================
        Flip ahead allows you to explore favorite websites like you would a magazine. --><link rel=next href=/page/2><link rel=prev href="/"><!-- | Internet Explorer Meta Header |
        ======================================
        The X-UA-Compatible meta tag allows web authors to choose what version of Internet Explorer the
        page should be rendered as. Edge mode tells Internet Explorer to display content in the highest
        mode available. --><meta http-equiv=X-UA-Compatible content="IE=edge"><!--
          For blog posts - use the title of the article
          else - use the default title.
        --><title>Unix file permissions - by Pankaj Parashar</title><!-- | SEO Meta Tag |
        =====================
        A page's descriptionription meta tag gives Google and other search engines a summary of what the page is about.
        Source : Google's Search Engine Optimisation Guide (PDF) --><meta name=description content="Hello. I am Pankaj Parashar, a 24yrs old front-end designer and web developer from Mumbai, India."><!-- | Mobile Viewport Meta Tag |
        =================================
        device-width  = Occupy full width of the screen in its current orientation
        initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
        maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
        minimal-ui = iOS7.1 full screen mode --><meta name=viewport content="width=device-width, initial-scale=1, minimal-ui"><!-- | Stylesheet |
        ===================
        normalize.css : Modern day alternative to CSS resets by Nicolas Galagher/Jonathan Neal
        style.css : Site specific stylesheet --><link rel=stylesheet href=/css/main.eec0.css><!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">--><!-- | Favicons |
        =================
        Generated using Real Favicon Generator
        Source : realfavicongenerator.net --><link rel=apple-touch-icon sizes=57x57 href=apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=114x114 href=apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=72x72 href=apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=144x144 href=apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=60x60 href=apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=120x120 href=apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=76x76 href=apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=152x152 href=apple-touch-icon-152x152.png><link rel=icon type=image/png href=favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=favicon-160x160.png sizes=160x160><!-- | Windows 8 Metro UI Tiles |
        =================================
        Generated using Modern IE
        Source : buildmypinnedsite.com --><meta name=application-name content="Pankaj Parashar"><meta name=msapplication-TileColor content=#ffc40d><meta name=msapplication-TileImage content=mstile-144x144.png><meta name=msapplication-square70x70logo content=mstile-70x70.png><meta name=msapplication-square150x150logo content=mstile-150x150.png><meta name=msapplication-square310x310logo content=mstile-310x310.png><!-- | Twitter Cards |
        ======================
        Validator : dev.twitter.com/docs/cards/validation/validator --><meta name=twitter:card content=summary><meta name=twitter:site content=@pankajparashar><meta name=twitter:title content="Pankaj Parashar"><meta name=twitter:description content="Developer. Designer. Writer."><meta name=twitter:creator content=@pankajparashar><meta name=twitter:image:src content=http://pankajparashar.com/img/logo.png><meta name=twitter:domain content=pankajparashar.com><!-- RSS Feeds --><link rel=alternate type=application/rss+xml title="Pankaj Parashar" href=/feed.xml><!-- Bing webmaster tools --><meta name=msvalidate.01 content=487AEF186C6F028EB596ABCAA4EF040B></head><!--
    ______           _         _  ______                   _
    | ___ \         | |       (_) | ___ \                 | |
    | |_/ /_ _ _ __ | | ____ _ _  | |_/ /_ _ _ __ __ _ ___| |__   __ _ _ __
    |  __/ _` | '_ \| |/ / _` | | |  __/ _` | '__/ _` / __| '_ \ / _` | '__|
    | | | (_| | | | |   < (_| | | | | | (_| | | | (_| \__ \ | | | (_| | |
    \_|  \__,_|_| |_|_|\_\__,_| | \_|  \__,_|_|  \__,_|___/_| |_|\__,_|_|
                             _/ |
                            |__/

    Giant ascii art embedded in every page of your site is how you
    show other people that YOU CARE. Mainly I care about developers,
    which is what I presume you are if you're all about viewing
    the source. Clearly you're my kind of person.

    This is v4, it's run through Jekyll, it's been fun to build,
    there's always more to do, and you may notice that aside from
    Google Analytics there is no JavaScript. None.

    That's one way of many you keep your pages fast. I care about
    keeping this site fast because your time is precious and I need
    to get out of your way.

    :: Pankaj Parashar

    --><body><!-- Microdata markup added by Google Structured Data Markup Helper. --><!--[if lt IE 8]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]--><header role=banner><h1 class=header__title><a href="/" class=header__title--link itemprop=author itemscope itemtype=http://schema.org/Person>Pankaj Parashar</a></h1><h2 class=header__subtitle>Developer. Designer. Writer.</h2><a href=http://twitter.com/pankajparashar class=header__follow>Follow @pankajparashar<!--<span class="header__follow--about fa fa-stack-exchange"></span>--></a> <!--<div id="fusion_ad">
        <span class="fusionentire">
            <a href="http://adn.fusionads.net/click?creative_id=811&amp;publisher_id=229&amp;1313146590559.2966" title="New Relic - Live the nerd life. Get the t-shirt." target="_top">
                <img src="http://adn.fusionads.net/creatives/retina/811-nerdlife.png" class="fusionimg" alt="New Relic - Live the nerd life. Get the t-shirt." border="0" height="100" width="130" style="width: 130px;">
            </a>
            <a href="http://adn.fusionads.net/click?creative_id=811&amp;publisher_id=229&amp;1313146590559.2966" class="fusiontext" title="New Relic - Live the nerd life. Get the t-shirt." target="_top">New Relic - Live the nerd life. Get the t-shirt.</a>
        </span>
        <a href="http://fusionads.net" class="powered">Ad by Fusion</a>
    </div>
    --><p class=header__desc>Hello. I am 24yrs old frontend designer and web developer from <a href="https://maps.google.com/maps?q=mumbai,+india">Mumbai, India</a>.</p><p class=header__desc>Browse through some of my <a href=/projects>side-projects</a> or read the articles on my <a href="/">blog</a> here.</p><hr class=header__hr><p class=header__desc>Get notified to read new articles,</p><form accept-charset=UTF-8 action=https://www.sendicate.net/subscribe/2w3gcl method=post class=header__form target=_blank><input class=header__form--subscriber name=email type=email placeholder="Enter your email address + press enter..." autocomplete=off><a href=/feed.xml class=header__form--submit><!--<i class="fa fa-rss"></i>--></a></form></header><!-- More info on WAI-ARIA roles
             http://knowledge.onsubject.com/html-role-attributes/ --><section role=main><article><h2 class=post__title><a class=post__title--link href=/posts/unix-file-permissions>Unix file permissions</a></h2><small class=post__date>Sunday, February 16, 2014</small> <small class=post__time>12.394444444444444</small><p class=post__excerpt>I have used Unix for the major portion of my professional career, yet I have always failed to understand the intricacies surrounding the file permissions system. This article is an attempt to dig deep and augment my understanding about them.</p><p>The file permissions on a typical Unix system looks like this,</p><div class=highlight><pre><code class=sh><span class=nv>$ </span>ls -ld /usr/bin /usr/bin/cat
drwxrwxr-x   3 root     bin         8704 Sep 23  2004 /usr/bin
-r-xr-xr-x   1 bin      bin         9388 Jul 16  1997 /usr/bin/cat
</code></pre></div><p>The Unix file permissions can be visualized in two forms,</p><ol><li>Symbolic mode</li><li>Octal mode</li></ol><div class=highlight><pre><code class=sh>&gt; SYMBOLIC MODE

-  --- --- ---
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>   └── -- rw<span class=o>(</span>x/t/T<span class=o>)</span> <span class=k>for </span>others <span class=o>(</span>o<span class=o>)</span>
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>   
<span class=p>|</span>   <span class=p>|</span>   └── ------ rw<span class=o>(</span>x/s/S<span class=o>)</span> <span class=k>for </span>groups <span class=o>(</span>g<span class=o>)</span>
<span class=p>|</span>   <span class=p>|</span>   
<span class=p>|</span>   └── ---------- rw<span class=o>(</span>x/s/S<span class=o>)</span> <span class=k>for </span>a user <span class=o>(</span>u<span class=o>)</span>
<span class=p>|</span>
└── -------------- file <span class=nb>type</span>: regular <span class=o>(</span>-<span class=o>)</span>
                              directory <span class=o>(</span>d<span class=o>)</span>
                              character special <span class=o>(</span>c<span class=o>)</span>
                              block special <span class=o>(</span>b<span class=o>)</span>
                              fifo <span class=o>(</span>p<span class=o>)</span>
                              symbolic link <span class=o>(</span>l<span class=o>)</span>
                              socket <span class=o>(</span>s<span class=o>)</span>
</code></pre></div><h3>1. Symbolic mode</h3><p>In bit mode, the permissions are represented using the characters <code>r</code>, <code>w</code>, <code>x</code>, <code>s</code>, <code>S</code>, <code>t</code>, <code>T</code>. The table below expands more on what each character stands for,</p><div class=highlight><pre><code class=sh>r -&gt; Read
w -&gt; Write
x -&gt; Execute

s -&gt; Execute bit is ON and Set UID/GID bit is ON
S -&gt; Execute bit is OFF and Set UID/GID bit is ON

t -&gt; Execute bit is ON and Sticky bit is ON
T -&gt; Execute bit is OFF and Sticky bit is ON
</code></pre></div><p>When a specific permission for a file doesn't apply to any of the user/group/other, Unix uses the default character <code>-</code> to represent the lack of permission.</p><p>For example,</p><div class=highlight><pre><code class=sh>-r-xr-xrwx   1 joe      bin         9388 Jul 16  1997 /usr/bin/cat
</code></pre></div><p>Joe has read/write/execute permissions on the file <code>/usr/bin/cat</code>. However, all the other users of the group <code>bin</code> to which Joe belongs have read and execute permissions only. All other users outside the group <code>bin</code> can also read and execute that file.</p><blockquote><p>The <code>root</code> user is special. <code>root</code> is granted <code>rwx</code> to all directories and <code>rw</code> to all files. On a file, if any of the 3x bits are set, then root has execute permission. This special permission is often disabled on network mounted filesystems.</p></blockquote><h3>2. Octal mode</h3><div class=highlight><pre><code class=sh>&gt; OCTAL MODE

0   0   0   0
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>   └── -- r<span class=o>(</span>4<span class=o>)</span>, w<span class=o>(</span>2<span class=o>)</span>, x<span class=o>(</span>1<span class=o>)</span> <span class=k>for </span>others <span class=o>(</span>o<span class=o>)</span>
<span class=p>|</span>   <span class=p>|</span>   <span class=p>|</span>
<span class=p>|</span>   <span class=p>|</span>   └── ------ r<span class=o>(</span>4<span class=o>)</span>, w<span class=o>(</span>2<span class=o>)</span>, x<span class=o>(</span>1<span class=o>)</span> <span class=k>for </span>groups <span class=o>(</span>g<span class=o>)</span>
<span class=p>|</span>   <span class=p>|</span>   
<span class=p>|</span>   └── ---------- r<span class=o>(</span>4<span class=o>)</span>, w<span class=o>(</span>2<span class=o>)</span>, x<span class=o>(</span>1<span class=o>)</span> <span class=k>for </span>a user <span class=o>(</span>u<span class=o>)</span>
<span class=p>|</span>
└── -------------- suid<span class=o>(</span>4<span class=o>)</span>, sgid<span class=o>(</span>2<span class=o>)</span>, sticky<span class=o>(</span>1<span class=o>)</span>
</code></pre></div><p>In the octal mode, the permissions are defined by 4-octal digits. The value for each of the last three digits can be computed as follows,</p><div class=highlight><pre><code class=sh>421
rwx

2^0 <span class=o>=</span> 1 –&gt; eXecute
2^1 <span class=o>=</span> 2 –&gt; Write
2^2 <span class=o>=</span> 4 -&gt; Read

+-----+---+--------------------------+
<span class=p>|</span> rwx <span class=p>|</span> 7 <span class=p>|</span> Read, write and execute  <span class=p>|</span>
<span class=p>|</span> rw- <span class=p>|</span> 6 <span class=p>|</span> Read, write              <span class=p>|</span>
<span class=p>|</span> r-x <span class=p>|</span> 5 <span class=p>|</span> Read, and execute        <span class=p>|</span>
<span class=p>|</span> r-- <span class=p>|</span> 4 <span class=p>|</span> Read,                    <span class=p>|</span>
<span class=p>|</span> -wx <span class=p>|</span> 3 <span class=p>|</span> Write and execute        <span class=p>|</span>
<span class=p>|</span> -w- <span class=p>|</span> 2 <span class=p>|</span> Write                    <span class=p>|</span>
<span class=p>|</span> --x <span class=p>|</span> 1 <span class=p>|</span> Execute                  <span class=p>|</span>
<span class=p>|</span> --- <span class=p>|</span> 0 <span class=p>|</span> no permissions           <span class=p>|</span>
+------------------------------------+

+------------+------+-------+
<span class=p>|</span> Permission <span class=p>|</span> Octal<span class=p>|</span> Field <span class=p>|</span>
+------------+------+-------+
<span class=p>|</span> rwx------  <span class=p>|</span> 700  <span class=p>|</span> User  <span class=p>|</span>
<span class=p>|</span> ---rwx---  <span class=p>|</span> 070  <span class=p>|</span> Group <span class=p>|</span>
<span class=p>|</span> ------rwx  <span class=p>|</span> 007  <span class=p>|</span> Other <span class=p>|</span>
+------------+------+-------+
</code></pre></div><p>The first digit also follows the same principle,</p><div class=highlight><pre><code class=sh><span class=nv>suid</span> <span class=o>=</span> 4
<span class=nv>sgid</span> <span class=o>=</span> 2
<span class=nv>sticky</span> <span class=o>=</span> 1
</code></pre></div><p>When a specific permission for a file doesn't apply to any of the user/group/other, Unix uses <code>0</code> to represent the absence of all permissions for the corresponding user/group/other.</p><p>For example,</p><div class=highlight><pre><code class=sh>4755
----

<span class=nv>4</span> <span class=o>=</span> Set UID bit is ON.
<span class=nv>7</span> <span class=o>=</span> <span class=nb>read</span><span class=o>(</span>4<span class=o>)</span> + write<span class=o>(</span>2<span class=o>)</span> + execute<span class=o>(</span>1<span class=o>)</span> permissions <span class=k>for </span>the user.
<span class=nv>5</span> <span class=o>=</span> <span class=nb>read</span><span class=o>(</span>4<span class=o>)</span> + execute<span class=o>(</span>1<span class=o>)</span> permissions <span class=k>for </span>group members.
<span class=nv>5</span> <span class=o>=</span> <span class=nb>read</span><span class=o>(</span>4<span class=o>)</span> + execute<span class=o>(</span>1<span class=o>)</span> permissions <span class=k>for </span>other members outside the group.
</code></pre></div><p>If the first of the four digits is <code>0</code> then it means that the file doesn't have any of the setuid, setgid or sticky bit present on it. Generally, the leading <code>0</code> can be omitted.</p><h3>The Special Bits</h3><p><br>1. Set UID and Set GID bits</p><p>Apart from the usual <code>rwx</code> bits, the UNIX permission system also has the <code>s</code> bit which stands for SetUID for user or SetGID for group. For a file, if this bit is defined, then the <code>x</code> is turned into <code>s</code> for the corresponding user/group/others. For example,</p><div class=highlight><pre><code class=css><span class=err>$</span> <span class=nt>ls</span> <span class=nt>-l</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>passwd</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>shadow</span> <span class=o>/</span><span class=nt>usr</span><span class=o>/</span><span class=nt>bin</span><span class=o>/</span><span class=nt>passwd</span>
<span class=nt>-r--r--r--</span>   <span class=nt>1</span> <span class=nt>root</span>     <span class=nt>sys</span>        <span class=nt>14006</span> <span class=nt>Jan</span> <span class=nt>14</span> <span class=nt>11</span><span class=nd>:17</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>passwd</span>
<span class=nt>-r--------</span>   <span class=nt>1</span> <span class=nt>root</span>     <span class=nt>sys</span>         <span class=nt>8281</span> <span class=nt>Jan</span> <span class=nt>14</span> <span class=nt>11</span><span class=nd>:18</span> <span class=o>/</span><span class=nt>etc</span><span class=o>/</span><span class=nt>shadow</span>
<span class=nt>-r-sr-sr-x</span>   <span class=nt>3</span> <span class=nt>root</span>     <span class=nt>sys</span>        <span class=nt>96244</span> <span class=nt>Sep</span>  <span class=nt>5</span>  <span class=nt>2001</span> <span class=o>/</span><span class=nt>usr</span><span class=o>/</span><span class=nt>bin</span><span class=o>/</span><span class=nt>passwd</span>
</code></pre></div><p>The <code>/etc/passwd</code> file is writable only by <code>root</code>. The <code>/etc/shadow</code> file is where the passwords are stored and cannot be read by ordinary users.</p><p>But <code>joe</code> wants to change his password. He can do that by running <code>/usr/bin/passwd</code>. Notice those <code>r-s</code> permissions. The passwd program has the suid and sgid bits set. This turns the x's into s's. The passwd program is owned by <code>root</code>. When <code>joe</code> runs it, it does not run as <code>joe</code>. Instead, it runs as it owner which is <code>root</code>.</p><p>So the passwd program can change joe's password for him. The sgid bit works the same way, except it causes the passwd program to run with the group <code>sys</code> instead of joe's group. The suid and sgid do not get their own position in the <code>ls</code>. When the suid bit is set, <code>ls</code> displays a <code>s</code> rather than a <code>x</code> for the owner execute permission.</p><p><br>2. The Sticky Bit</p><p>If the sticky bit is set on a directory, mere write permission on the directory is no longer enough to remove the files. You must additionally own the file or own the directory.</p><blockquote><p>The <code>root</code> user continues to be able to delete files from any directory regardless of the permissions.</p></blockquote><p>The sticky bit affects the <code>other</code> execute bit in the <code>ls</code> display. Except that it uses <code>t</code> and <code>T</code> rather than <code>s</code> and <code>S</code>. For example,</p><div class=highlight><pre><code class=python><span class=n>drwxrwxrwt</span>   <span class=mi>5</span> <span class=n>root</span>       <span class=n>root</span>          <span class=mi>1024</span> <span class=n>Feb</span> <span class=mi>11</span> <span class=mi>20</span><span class=p>:</span><span class=mi>43</span> <span class=o>/</span><span class=n>tmp</span>
</code></pre></div><p>In that <code>/tmp</code> directory above, anyone can create new files. But because of the sticky bit, one user cannot delete another user's files.</p><p>Some examples using special bits,</p><div class=highlight><pre><code class=sh>+------------------+
<span class=p>|</span>rwxrwxrwx     777 <span class=p>|</span> all permissions granted
<span class=p>|</span>rwxr-xr-x     755 <span class=p>|</span> group and others <span class=nb>read</span> <span class=p>&amp;</span> executable
<span class=p>|</span>rwx------     700 <span class=p>|</span> private file
<span class=p>|</span>rwsr-xr-x    4755 <span class=p>|</span> <span class=nb>set </span>UID
<span class=p>|</span>rwxr-sr-x    2755 <span class=p>|</span> <span class=nb>set </span>GID
<span class=p>|</span>rwxr-xr-t    1755 <span class=p>|</span> sticky bit
<span class=p>|</span>rwSw-xr-x    4655 <span class=p>|</span> setUID but not executable by user
<span class=p>|</span>rwxr-Sr-x    2745 <span class=p>|</span> getGID, but not executable by group members
<span class=p>|</span>rwxr-xr-T    1754 <span class=p>|</span> sticky bit, but not executable by others
+------------------+
</code></pre></div><h3>Special cases</h3><p><br><strong>What do <code>rwx</code> really mean for a file?</strong><br>For a file, <code>r</code> and <code>w</code> permissions are self-explanatory. The <code>x</code> permission means that the user can run the file which either is an output from a compiler or a shell script.</p><p><strong>What do <code>rwx</code> really mean for a directory?</strong><br>For a directory, things are a little more complex. A directory is a file too, and <code>r</code> permission means you can read it. With <code>w</code> permission you can create new files in the directory or remove old files.</p><blockquote><p>It sometimes surprises people that you can remove a file which you cannot read. The unix <code>rm</code> command will test for that and issue a warning, but you can suppress that warning with <code>-f</code>. And <code>rmdir</code> will not even bother to check at all.</p></blockquote><p>But you really cannot do very much without <code>x</code> permission. With directories, you usually have both read and execute permissions or neither. On a directory, <code>x</code> is officially called "search permission". You need <code>x</code> to use a directory in a pathname. So if you try <code>cat /etc/passwd</code>, you will need <code>x</code> on <code>/</code> and <code>/etc</code>. You also need <code>x</code> to cd into a directory.</p><p>Case 1 - Only <code>r</code> permission on a directory<br>You can use <code>ls</code> to list the file names. But <code>ls -l</code> will not work.</p><p>Case 2 - Only <code>w</code> permission on a directory<br>This is completely useless and grants nothing at all.</p><p>Case 3 - Only <code>x</code> permission on a directory<br>When you have <code>x</code> permission but no <code>r</code> permission on a directory then you can open files in the directory if you happen to know the file's name. You can <code>cd</code> into the directory but cannot create a new file. Adding write permission will allow you to create files. And you can then delete files if you happen to know their name.</p><h3>How to get octal permissions for a file?</h3><p>File permissions in Linux can be displayed in octal format using Linux <code>stat</code> command.</p><div class=highlight><pre><code class=sh><span class=nv>$ </span>stat -c <span class=s1>&#39;%A %a %n&#39;</span> *

<span class=o>[</span>Replace * with the relevant directory or the exact filename<span class=o>]</span>

<span class=nv>$ </span>man stat
-c  --format<span class=o>=</span>FORMAT
             use  the  specified  FORMAT instead of the default<span class=p>;</span> output a newline after
            each use of FORMAT
%A  Access rights in human readable form          
%a  Access rights in octal
%n  File name
</code></pre></div><h3>The umask command</h3><p>When a user creates a file or directory, it gets a default set of permissions. The user file-creation mode mask (<code>umask</code>) is used to determine the file permissions for newly created files. It can be used to control the default file permission for new files. It is a four-digit octal number. A umask can be set or expressed using:</p><ul><li>Symbolic values</li><li>Octal values</li></ul><p><strong>Symbolic values</strong></p><p>A umask set to <code>u=rwx,g=rwx,o=</code> will result in new files having the modes <code>-rw-rw----</code>, and new directories having the modes <code>drwxrwx---</code>.</p><div class=highlight><pre><code class=sh><span class=nv>$ </span><span class=nb>umask </span><span class=nv>u</span><span class=o>=</span>rwx,g<span class=o>=</span>rwx,o<span class=o>=</span>
<span class=nv>$ </span><span class=nb>umask</span>
0007
<span class=nv>$ </span>mkdir foo
<span class=nv>$ </span>touch bar
<span class=nv>$ </span>ls -l
drwxrwx--- 2 dave dave 512 Sep 1 20:59 foo
-rw-rw---- 1 dave dave 0   Sep 1 20:59 bar
</code></pre></div><p><strong>Octal values</strong></p><p>The octal notation for the permissions masked out are,</p><div class=highlight><pre><code class=sh>0 – Full permissions <span class=o>(</span>Read, Write, Execute<span class=o>)</span>
1 – Write and <span class=nb>read</span>
2 – Read and execute
3 – Read only
4 – Write and execute
5 – Write only
6 – Execute onlyadminadmin
7 – No permissions

<span class=nv>$ </span><span class=nb>umask </span>022
<span class=nv>$ </span>mkdir foo
<span class=nv>$ </span>touch bar
<span class=nv>$ </span>ls -l
drwxr-xr-x 2 dave dave 512 Aug 18 20:59 foo
-rw-r--r-- 1 dave dave 0   Aug 18 20:59 bar
</code></pre></div><p>Though umask value is the same for files and folders, but the calculation of file base permissions and directory base permissions are different.</p><blockquote><p>The minimum and maximum <code>umask</code> value for a folder is <code>000</code> and <code>777</code>. The minimum and maximum <code>umask</code> value for a file is <code>000</code> and <code>666</code>. This is because only scripts and binaries should have execute permissions, normal and regular files should have just read and write permissions. Directories require execute permissions for viewing the contents in it, so they can have <code>777</code> as permissions.</p></blockquote><p><strong>How the actual permissions are calculated from umask?</strong></p><p>Suppose the umask value is <code>027</code>.</p><ul><li>For directories, the permission is derived by doing octal subtraction of <code>027</code> from the maximum possible value, <code>777</code>. So the directory permission is <code>750</code> when its created. Owner will get full permission, group gets execute and write permissions and others no permissions.</li><li>For files, the permission is derived by doing octal subtraction of <code>027</code> from the maximum possible value, <code>666</code>. So the file permission is <code>640</code> when its created. Owner will get read &amp; write permission, group gets read permission only, and others no permissions.</li></ul><p><strong>Find out the default umask</strong></p><div class=highlight><pre><code class=sh><span class=nv>$ </span><span class=nb>umask</span>
0022
</code></pre></div><p>The preceding <code>0</code> indicates there is no SUID/SGID/Sticky bit information set.</p><p><strong>Some FAQ related to umask</strong></p><p>1) How to set or change default <code>umask</code> for all the new users? The <code>umask</code> value can be set in <code>/etc/profile</code> for all the new users.</p><p>2) How to set or change default <code>umask</code> for existing users? For existing users you can edit <code>~/.bashrc</code> file in their home directory.</p><p><strong>Changing permissions with chmod</strong></p><p>The <code>chmod</code> command in Unix is abbreviated as <strong>CH</strong>ange <strong>MOD</strong>e. Chmod command is used to change permission for files and directories in Unix.</p><p>1) Symbolic method like <code>chmod +x filename</code>.</p><div class=highlight><pre><code class=sh>The who part can be:
u  <span class=o>(</span>user<span class=o>)</span>
g  <span class=o>(</span>group<span class=o>)</span>
o  <span class=o>(</span>other<span class=o>)</span>
a  <span class=o>(</span>all<span class=o>)</span>
   <span class=o>(</span>whatever is allowed by <span class=nb>umask</span> <span class=o>(</span>subset of all<span class=o>))</span>

The operator can <span class=nv>be</span>  <span class=o>=</span> or - or +
<span class=o>=</span> <span class=o>(</span><span class=nb>set </span>bits to bitlist<span class=o>)</span>
- <span class=o>(</span>subtract bitlist from current bit
+ <span class=o>(</span>add bitllist to current bits<span class=o>)</span>

The bitlist can be one of the following letters:
r <span class=o>(</span><span class=nb>read </span>permission<span class=o>)</span>
w <span class=o>(</span>write permission<span class=o>)</span>
x <span class=o>(</span>execute permision<span class=o>)</span>
X <span class=o>(</span>conditional execute permision<span class=o>)</span>
u <span class=o>(</span>current permissions <span class=k>for </span>user<span class=o>)</span>
g <span class=o>(</span>current permissions <span class=k>for </span>group<span class=o>)</span>
o <span class=o>(</span>current permissions <span class=k>for </span>others<span class=o>)</span>
s <span class=o>(</span><span class=nb>set </span>uid or <span class=nb>set </span>gid<span class=o>)</span>
t <span class=o>(</span>sticky bit<span class=o>)</span>
</code></pre></div><p>2) Octal method like <code>chmod 775 filename</code>.</p><p>Let us review some examples in both symbolic and octal representaions for files.</p><div class=highlight><pre><code class=sh>+------------------------+-----------+
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rwx,g<span class=o>=</span>rwx,o<span class=o>=</span>rx <span class=p>|</span> chmod 775 <span class=p>|</span>
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rwx,g<span class=o>=</span>rx,o<span class=o>=</span>    <span class=p>|</span> chmod 750 <span class=p>|</span>
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rw,g<span class=o>=</span>r,o<span class=o>=</span>r     <span class=p>|</span> chmod 644 <span class=p>|</span>
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rw,g<span class=o>=</span>r,o<span class=o>=</span>      <span class=p>|</span> chmod 640 <span class=p>|</span>
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rw,go<span class=o>=</span>         <span class=p>|</span> chmod 600 <span class=p>|</span>
<span class=p>|</span> chmod <span class=nv>u</span><span class=o>=</span>rwx,go<span class=o>=</span>        <span class=p>|</span> chmod 700 <span class=p>|</span>
+------------------------+-----------+
</code></pre></div><p>Did you enjoy reading this article? I'd love to hear your thoughts. Shoot me an <a href=mailto:email@pankajparashar.com>email</a> or send me a <a href="https://twitter.com/intent/tweet?via=pankajparashar&text=Unix file permissions">tweet</a> if you've got any comments.</p></article></section><footer role=contentinfo><input class=footer__search type=search placeholder="Search this website + press enter..." autocomplete=off role=search><p class=footer__copyright>&copy;2014. Pankaj Parashar. <a class=footer__top--link href=# role=button>Back to top</a></p></footer><script src=/js/script.c911.js></script></body></html>